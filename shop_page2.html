<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/shop2.css">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- 引用ShopFilter元件 -->
    <script type="text/babel" src="./ShopFilter.jsx"></script>
    <title>SHOP 商品頁2</title>
</head>

<body>
    <header></header>
    <main>
        <section id="banner">
            <div class="img_container"></div>
        </section>



        <div id="root"></div>



        <script type="text/babel">

            function Item(props) {
                return (
                    <div className="item_wrap">
                        <a className="item" href="#">
                            <div className="item_pic"> <img src={props.pic} /></div>
                            <div className="item_name">{props.name}</div>
                            <div className="item_price">NT {props.price}</div>
                            <div className="item_text">{props.text}</div>
                        </a>
                    </div>)
            }

            const App = () => {


                const items = [
                    {
                        id: "1",
                        pic: "./images/shop_images/item1.jpg",
                        name: "2025新年賀禮巧克力禮盒12入",
                        price: '2,600',
                        text: "每顆巧克力皆由大師手工製作，結合頂級原料，讓您體驗無可比擬的奢華口感。"

                    }, {
                        id: '2',
                        pic: "./images/shop_images/item2.jpg",
                        name: "2025新年賀禮巧克力禮盒12入",
                        price: '200',
                        text: "每顆巧克力皆由大師手工製作，結合頂級原料，讓您體驗無可比擬的奢華口感。"

                    }, {
                        id: '3',
                        pic: "./images/shop_images/item3.jpg",
                        name: "2025新年賀禮巧克力禮盒12入",
                        price: '1,600',
                        text: "每顆巧克力皆由大師手工製作，結合頂級原料，讓您體驗無可比擬的奢華口感。"


                    }, {
                        id: '4',
                        pic: "./images/shop_images/item4.jpg",
                        name: "2025新年賀禮巧克力禮盒12入",
                        price: '2,600',
                        text: "每顆巧克力皆由大師手工製作，結合頂級原料，讓您體驗無可比擬的奢華口感。"

                    }]

                // 創建狀態來管理篩選條件
                const [filteredItems, setFilteredItems] = React.useState(items);
                const [selectedPriceRange, setSelectedPriceRange] = React.useState(null);

                // 創建狀態來控制每個下拉菜單的顯示狀態
                const [showFestivalDropdown, setShowFestivalDropdown] = React.useState(false);
                const [showCountsDropdown, setShowCountsDropdown] = React.useState(false);
                const [showPriceDropdown, setShowPriceDropdown] = React.useState(false);
                const [showPermutationDropdown, setShowPermutationDropdown] = React.useState(false);

                const handlePriceFilter = (range) => {
                    setSelectedPriceRange(range);
                    const filtered = items.filter(item => {
                        const price = parseInt(item.price.replace(',', '').trim());
                        switch (range) {
                            case 'below500':
                                return price < 500;
                            case 'below1000':
                                return price < 1000;
                            case 'below2000':
                                return price < 2000;
                            case 'above2000':
                                return price > 2000;
                            default:
                                return true;
                        }
                    });
                    setFilteredItems(filtered);
                };

                // 函數：切換下拉菜單的顯示狀態
                //    const toggleDropdown = (dropdownSetter) => {
                //       dropdownSetter(prevState => !prevState); 
                // };
                const toggleDropdown = (dropdown) => {
                    switch (dropdown) {
                        case 'price':
                            setShowPriceDropdown(prevState => !prevState);
                            break;
                        case 'counts':
                            setShowCountsDropdown(prevState => !prevState);
                            break;
                        case 'festival':
                            setShowFestivalDropdown(prevState => !prevState);
                            break;
                        case 'permutation':
                            setShowPermutationDropdown(prevState => !prevState);
                            break;
                        default:
                            break;
                    }
                };




                return (<>
                    <section id="items_content">
                        <ShopFilter
                            handlePriceFilter={handlePriceFilter}
                            toggleDropdown={toggleDropdown}
                            showPriceDropdown={showPriceDropdown}
                            showCountsDropdown={showCountsDropdown}
                            showFestivalDropdown={showFestivalDropdown}
                        />

                        <div class="items_list">
                            {/*items => filteredItems*/}
                            {filteredItems.map((item) => {
                                return (
                                    <Item key={item.id} pic={item.pic} name={item.name} price={item.price} text={item.text} />
                                )
                            })
                            }

                        </div>
                        <div class="change_page">
                            <div id="pages_num">
                                <a href="./shop.html">1</a>
                                <a href="#">2</a>
                                <a href="#">3</a>
                            </div>
                            <div class="next_pages">
                                <a href="#" class="next_page_text"><img src="./images/footer_btn_nextpage.svg" alt="" /></a>
                            </div>
                        </div>
                    </section>
                    <Footer />

                </>)
            };
            ReactDOM.createRoot(document.getElementById('root')).render(<App />);
        </script>


        <!-- <div class="item_wrap">
                        <a class="item" href="#">
                            <div class="item_pic"> <img src="./images/shop_images/item9.jpg" alt=""></div>
                            <div class="item_name">麋鹿聖誕-巧克力禮盒</div>
                            <div class="item_price">NT 3,000</div>
                            <div class="item_text">聖誕節限定巧克力禮盒，精緻設計與美味巧克力，增添節日的歡樂與喜悅。</div>
                        </a>
                    </div> -->

        </div>





    </main>
    <!-- 引用Footer元件 -->
    <script type="text/babel" src="./Footer.jsx"></script>
    <link rel="stylesheet" href="./css/Footer.css">
    <!-- <div id="footer"></div>
    
    <script type="text/babel">
        function App() {
            return (
                <Footer />
            )
        }
        ReactDOM
            .createRoot(document.getElementById('footer'))
            .render(<App />);
    </script> -->
    <!-- js -->
    <script src="./js/shop.js"></script>
</body>

</html>